#include <iostream>
#include "result_sum_arr.h"
using namespace std;

#define BRED "\033[91m"
#define GREEN "\033[32m"
#define BBLUE "\033[94m"
#define RESET "\033[0m"
#define BYELLOW "\033[93m"

void sum()
{
  int n;
  cout << BBLUE << "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÑ‚Ñ€Ð¾Ðº Ð² Ð¼Ð°ÑÑÐ¸Ð²Ðµ: ";
  cin >> n;
  if (n <= 0)
  {
    cout << BRED << "Ð§Ð¸ÑÐ»Ð¾ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½ÑƒÐ»Ñ. Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: ";
    cin >> n;
  }

  int k;
  cout << BBLUE << "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÑ‚Ð¾Ð»Ð±Ñ†Ð¾Ð² Ð² Ð¼Ð°ÑÑÐ¸Ð²Ðµ: ";
  cin >> k;
  if (k <= 0)
  {
    cout << BRED << "Ð§Ð¸ÑÐ»Ð¾ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½ÑƒÐ»Ñ. Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: ";
    cin >> k;
  }

  int **array_A = new int *[n];
  for (int i = 0; i < n; i++)
  {
    array_A[i] = new int[k];
  }

  cout << "Ð’Ð²ÐµÑÑ‚Ð¸ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¼Ð°ÑÑÐ¸Ð²Ð°: ";

  for (int i = 0; i < n; i++)
  {
    for (int j = 0; j < k; j++)
    {
      cout << "A[" << i << "][" << j << "] = ";
      cin >> array_A[i][j];
      cout << "\n";
    }
  }

  cout << "Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ñ‹Ð¹ Ð¼Ð°ÑÑÐ¸Ð² Ð: " << endl;

  for (int i = 0; i < n; i++)
  {
    for (int j = 0; j < k; j++)
    {
      cout << array_A[i][j] << " ";
    }
    cout << "\n";
  }

  int count = count_el(array_A, n, k);
  if(count == 0)
   { 
      cout << BRED << "Ð§Ñ‘Ñ‚Ð½Ñ‹Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð½Ð° Ð³Ð»Ð°Ð²Ð½Ð¾Ð¹ Ð´Ð¸Ð°Ð³Ð¾Ð½Ð°Ð»Ð¸ Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†Ñ‹ Ð½ÐµÑ‚." << RESET << endl;
      return;
   }

  int *arr_diag = new int[count];

  diag(arr_diag, count, array_A,  n, k);

  cout << "\n"
       << GREEN << "ÐŸÑ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ñ€Ð°Ð²Ð½Ð¾: " << product(arr_diag, count) << endl;

  for (int i = 0; i < n; i++)
    delete[] array_A[i];
  delete[] array_A;

  delete[] arr_diag;
}

void help()
{
  cout << GREEN << "calc\tÐ²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ\n"
       << BYELLOW << "help\tÐ²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½ÑƒÑŽ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ\n"
       << BRED << "quit,exit\tÐ²Ñ‹Ñ…Ð¾Ð´Ð¸Ñ‚ Ð¸Ð· Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°" << endl;
}

int main()
{
  cout << BBLUE << "Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ!" << endl
       << "Ð”Ð°Ð½Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð»ÐµÐ½ Ð®Ñ€Ð³Ð¸Ð»ÐµÐ²Ð¸Ñ‡ Ð’Ð°Ð»ÐµÑ€Ð¸ÐµÐ¹" << RESET << endl
       << BYELLOW << "Ð”Ð°Ð½ Ð´Ð²ÑƒÐ¼ÐµÑ€Ð½Ñ‹Ð¹ Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¼Ð°ÑÑÐ¸Ð² Ñ†ÐµÐ»Ñ‹Ñ… Ñ‡Ð¸ÑÐµÐ» Ð Ñ€Ð°Ð·Ð¼ÐµÑ€Ð½Ð¾ÑÑ‚ÑŒÑŽ ð‘›Ã—ð‘˜. Ð Ð°Ð·Ð¼ÐµÑ€Ð½Ð¾ÑÑ‚ÑŒ Ð¼Ð°ÑÑÐ¸Ð²Ð° Ð²Ð²ÐµÑÑ‚Ð¸ Ñ ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñ‹. Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð¼Ð°ÑÑÐ¸Ð²Ð° Ð²Ð²ÐµÑÑ‚Ð¸ Ñ ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñ‹. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¼Ð°ÑÑÐ¸Ð² Ð¸Ð· ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð², Ñ€Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ñ… Ð½Ð° Ð³Ð»Ð°Ð²Ð½Ð¾Ð¹ Ð´Ð¸Ð°Ð³Ð¾Ð½Ð°Ð»Ð¸ Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†Ñ‹ Ð¸ Ð¸Ð¼ÐµÑŽÑ‰Ð¸Ñ… Ñ‡ÐµÑ‚Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ. Ð’Ñ‹Ñ‡Ð¸ÑÐ»Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¼Ð°ÑÑÐ¸Ð²Ð°. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð¼Ð°ÑÑÐ¸Ð² Ð¸ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸ Ð½Ð° ÑÐºÑ€Ð°Ð½. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸." << RESET << endl
       << "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ" << BBLUE << " calc" << RESET << ", ÐµÑÐ»Ð¸ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ;" << BBLUE << " help" << RESET << ", ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð° Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ" << endl
       << "Ð•ÑÐ»Ð¸ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ð¸Ðµ Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚, Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ" << BBLUE << " quit Ð¸Ð»Ð¸ exit" << endl;
  while (true)
  {
    string command;
    cout << BYELLOW << "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ: " << RESET;
    cin >> command;
    if (command == "calc")
    {
      sum();
    }
    else if (command == "help")
    {
      help();
    }
    else if (command == "quit" || command == "exit")
    {
      return 0;
    }
    else
    {
      cout << BRED << "Ð”Ð°Ð½Ð½Ð°Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð°" << RESET << endl;
    }
  }
  return 0;
}